(this["webpackJsonptrivia-test"]=this["webpackJsonptrivia-test"]||[]).push([[0],{39:function(e,t,a){e.exports=a.p+"static/media/trybe.e7579ad8.svg"},41:function(e,t,a){e.exports=a.p+"static/media/celular.5eb07356.svg"},42:function(e,t,a){e.exports=a.p+"static/media/button-play.5e2c9f33.svg"},43:function(e,t,a){e.exports=a.p+"static/media/feedback.c2e8b070.svg"},45:function(e,t,a){e.exports=a(87)},54:function(e,t,a){},56:function(e,t){},81:function(e,t,a){},82:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(22),i=a.n(c),s=a(18),o=a(12),l=a(19),u=a(35),m=a(37),d=a(36),b={questions:[]},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"@QUIZ/SAVEQUESTION":return Object(d.a)({},e,{questions:t.state});default:return e}},h=Object(l.combineReducers)({quiz:p}),f=Object(l.createStore)(h,Object(u.composeWithDevTools)(Object(l.applyMiddleware)(m.a)));window.Cypress&&(window.store=f);var v=f,g=(a(54),a(4)),E=a(5),O=a(7),y=a(6),k=a(8),j=a(2),S=a(44),w=a(11),x=a(14),N=a.n(x),C=a(38);var I={fetchTriviaToken:function(){return function(e){var t,a,n,r;return N.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,N.a.awrap(fetch("https://opentdb.com/api_token.php?command=request"));case 2:return t=c.sent,c.next=5,N.a.awrap(t.json());case 5:return a=c.sent,localStorage.setItem("token",a.token),c.next=9,N.a.awrap(fetch("https://opentdb.com/api.php?amount=5&token=".concat(a.token)));case 9:return n=c.sent,c.next=12,N.a.awrap(n.json());case 12:r=c.sent,console.log(r.results),e({type:"@QUIZ/SAVEQUESTION",state:r.results});case 15:case"end":return c.stop()}}))}},savePlayer:function(e,t){var a,n,r;return N.a.async((function(c){for(;;)switch(c.prev=c.next){case 0:a=Object(C.MD5)(e).toString(),n="https://www.gravatar.com/avatar/".concat(a),r={player:{name:t,gravatarEmail:n,score:0,assertions:0}},localStorage.setItem("state",JSON.stringify(r));case 4:case"end":return c.stop()}}))}},Q=(a(81),function(e){function t(){return Object(g.a)(this,t),Object(O.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("state")).player;return r.a.createElement("header",null,r.a.createElement("img",{"data-testid":"header-profile-picture",src:e.gravatarEmail,alt:""}),r.a.createElement("div",{className:"info-container"},r.a.createElement("h2",{className:"name","data-testid":"header-player-name"},e.name),r.a.createElement("h3",{"data-testid":"header-score"},"Score:"," ",e.score)))}}]),t}(r.a.Component)),T=a(39),J=a.n(T),q=function(e){function t(){return Object(g.a)(this,t),Object(O.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return r.a.createElement("img",{className:"loading",src:J.a,alt:"Loading"})}}]),t}(r.a.Component),D=(a(82),function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(O.a)(this,Object(y.a)(t).call(this))).state={isClicked:!1,isDisabled:!1,timer:30,index:0},e.renderQuestion=e.renderQuestion.bind(Object(w.a)(e)),e.handleAnswer=e.handleAnswer.bind(Object(w.a)(e)),e.timer=e.timer.bind(Object(w.a)(e)),e.nextQuestion=e.nextQuestion.bind(Object(w.a)(e)),e}return Object(k.a)(t,e),Object(E.a)(t,[{key:"componentDidMount",value:function(){this.timer()}},{key:"timer",value:function(){var e=this;this.decrementTime=setInterval((function(){var t=e.state.timer;t?e.setState({timer:t-1}):(clearInterval(e.decrementTime),e.setState({isDisabled:!0,isClicked:!0}))}),1e3)}},{key:"nextQuestion",value:function(){var e=this.state.index;if(4===e){var t=JSON.parse(localStorage.getItem("ranking")),a=JSON.parse(localStorage.getItem("state")).player;if(t)t.push(a),localStorage.setItem("ranking",JSON.stringify(t));else{var n=[a];localStorage.setItem("ranking",JSON.stringify(n))}return this.setState({lastQuestion:!0})}this.setState({index:e+1,isClicked:!1,timer:30,isDisabled:!1},this.timer)}},{key:"handleAnswer",value:function(e){var t=e.target;clearInterval(this.decrementTime),this.setState({isClicked:!0,isDisabled:!0},(function(){var e=document.querySelector(".correct").textContent,a=JSON.parse(localStorage.getItem("state"));e===t.textContent&&(a.player.score+=10,a.player.assertions+=1),localStorage.setItem("state",JSON.stringify(a))}))}},{key:"renderQuestion",value:function(e){var t=this,a=e.question,n=e.correct_answer,c=e.incorrect_answers,i=e.category,s=this.state,o=s.isClicked,l=s.isDisabled;return r.a.createElement("div",null,r.a.createElement("h3",{"data-testid":"question-category"},i),r.a.createElement("h3",{"data-testid":"question-text"},a),r.a.createElement("div",{className:"answer-container"},[].concat(Object(S.a)(c),[n]).sort().map((function(e,a){return r.a.createElement("button",{key:a,className:o&&(n===e?"correct":"wrong"),type:"button",id:n===e?"correct-answer":"wrong-answer-".concat(a),"data-testid":n===e?"correct-answer":"wrong-answer-".concat(a),onClick:t.handleAnswer,disabled:l},e)}))))}},{key:"render",value:function(){var e=this.props.questions,t=this.state,a=t.timer,n=t.isClicked,c=t.index;return t.lastQuestion?r.a.createElement(j.a,{to:"/feedback"}):r.a.createElement("div",{className:"main-content"},r.a.createElement("div",{className:"tablet-div"},r.a.createElement(Q,null),r.a.createElement("main",null,e.length?this.renderQuestion(e[c]):r.a.createElement(q,null)),r.a.createElement("p",null,r.a.createElement("span",null,a)),n&&r.a.createElement("button",{className:"button-next","data-testid":"btn-next",type:"button",onClick:this.nextQuestion},"Pr\xf3xima")))}}]),t}(r.a.Component)),A=Object(s.b)((function(e){return{questions:e.quiz.questions}}),(function(e){return{fetchTriviaQuestions:function(){return e(I.fetchTriviaQuestions())}}}))(D),P=a(23),M=a(41),U=a.n(M),R=(a(84),function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(O.a)(this,Object(y.a)(t).call(this))).state={name:"",email:""},e.handle=e.handle.bind(Object(w.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(w.a)(e)),e}return Object(k.a)(t,e),Object(E.a)(t,[{key:"handle",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(P.a)({},a,n))}},{key:"handleSubmit",value:function(){var e=this.state,t=e.email,a=e.name;(0,this.props.fetchTriviaToken)(),I.savePlayer(t,a)}},{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=new RegExp(/[\w\d]+@[\w\d]+[.]com+/);return r.a.createElement("div",{className:"main-content"},r.a.createElement("img",{className:"image-container",src:U.a,alt:"celular"}),r.a.createElement("div",{className:"input-container"},r.a.createElement("input",{onChange:this.handle,value:t,name:"name",type:"text","data-testid":"input-player-name",placeholder:"Digite seu nome..."}),r.a.createElement("input",{onChange:this.handle,value:a,name:"email",type:"text","data-testid":"input-gravatar-email",placeholder:"Digite seu email..."})),r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{type:"button","data-testid":"btn-settings",onClick:this.handleSubmit},"Configura\xe7\xf5es"),r.a.createElement(o.b,{to:"/game"},r.a.createElement("button",{type:"button",disabled:!(t&&n.test(a)),"data-testid":"btn-play",onClick:this.handleSubmit},"Jogar"))))}}]),t}(r.a.Component)),V=Object(s.b)(null,(function(e){return{fetchTriviaToken:function(){return e(I.fetchTriviaToken())}}}))(R),W=(a(85),a(42)),_=a.n(W),z=function(e){function t(){return Object(g.a)(this,t),Object(O.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("ranking"));return e.sort((function(e,t){return t.score-e.score})),r.a.createElement("div",{className:"ranking-content"},r.a.createElement("div",{className:"position-container"},e.map((function(e,t){return r.a.createElement("div",{className:"ranking-container ".concat(t%2?"white":"purple"),key:t},r.a.createElement("p",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("p",{"data-testid":"player-score-".concat(t)},"Pontua\xe7\xe3o: ".concat(e.score)))}))),r.a.createElement(o.b,{className:"play",to:"/"},r.a.createElement("img",{src:_.a,alt:"button"})))}}]),t}(r.a.Component),B=function(e){function t(){return Object(g.a)(this,t),Object(O.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("state")).player;return r.a.createElement("div",null,r.a.createElement("header",null,r.a.createElement("h1",{"data-testid":"settings-title"},e.name),r.a.createElement("img",{src:e.gravatarEmail,alt:"avatar"})))}}]),t}(r.a.Component),Z=(a(86),a(43)),L=a.n(Z),$=function(e){function t(){var e;return Object(g.a)(this,t),(e=Object(O.a)(this,Object(y.a)(t).call(this))).message=e.message.bind(Object(w.a)(e)),e}return Object(k.a)(t,e),Object(E.a)(t,[{key:"message",value:function(e){return e<3?r.a.createElement("p",{"data-testid":"feedback-text"},"Podia ser melhor..."):r.a.createElement("p",{"data-testid":"feedback-text"},"Mandou bem!")}},{key:"render",value:function(){var e=JSON.parse(localStorage.getItem("state")).player;return r.a.createElement("div",{className:"feedback-content"},r.a.createElement("div",{className:"score-container"},r.a.createElement("p",{"data-testid":"feedback-total-score"},"Pontua\xe7\xe3o: ".concat(e.score)),r.a.createElement("p",{"data-testid":"feedback-total-question"},"Acertos: ".concat(e.assertions))),r.a.createElement("img",{src:L.a,alt:"Pessoas",className:"image-feedback"}),r.a.createElement("div",{className:"btn-feedback"},r.a.createElement(o.b,{to:"/ranking"},r.a.createElement("button",{type:"button","data-testid":"btn-ranking"},"Ver Ranking")),r.a.createElement(o.b,{to:"/"},r.a.createElement("button",{type:"button","data-testid":"btn-play-again"},"Jogar novamente"))))}}]),t}(r.a.Component),F=function(e){function t(){return Object(g.a)(this,t),Object(O.a)(this,Object(y.a)(t).apply(this,arguments))}return Object(k.a)(t,e),Object(E.a)(t,[{key:"render",value:function(){return r.a.createElement(j.d,null,r.a.createElement(j.b,{exact:!0,path:"/",render:function(){return r.a.createElement(V,null)}}),r.a.createElement(j.b,{exact:!0,path:"/game",render:function(){return r.a.createElement(A,null)}}),r.a.createElement(j.b,{exact:!0,path:"/ranking",render:function(){return r.a.createElement(z,null)}}),r.a.createElement(j.b,{exact:!0,path:"/settings",render:function(){return r.a.createElement(B,null)}}),r.a.createElement(j.b,{exact:!0,path:"/feedback",render:function(){return r.a.createElement($,null)}}))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(s.a,{store:v},r.a.createElement(o.a,null,r.a.createElement(F,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[45,1,2]]]);
//# sourceMappingURL=main.75fa7854.chunk.js.map